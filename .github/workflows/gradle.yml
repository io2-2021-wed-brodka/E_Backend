name: Java CI with Gradle

on:
  workflow_dispatch:
    inputs:
        tags:
          description: 'Manually triggered action'  

jobs:

  build:
  
    environment: 'example'
    
    runs-on: ubuntu-latest

    steps:
    
    #setup jdk
    - uses: actions/checkout@v2
    - name: Set up JDK 11
      uses: actions/setup-java@v1
      with:
        java-version: 11

    - name: Build NiezlyBackendPL image
      run: ./gradlew :NiezlyBackendPL:build -xtest
      
    - name: Save NiezlyBackendPL image
      run: docker save -o NiezlyBackendImage.tgz niezly-backend-pl:latest

    - name: Output summary to console
      run: echo ${{ steps.run-newman.outputs.summary }}


